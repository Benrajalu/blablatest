(this.webpackJsonpblablatest=this.webpackJsonpblablatest||[]).push([[0],{17:function(t,e,n){t.exports={app:"App_app__3xquF"}},24:function(t,e,n){},28:function(t,e,n){"use strict";n.r(e);var c=n(4),r=n.n(c),s=n(16),a=n.n(s),i=(n(24),n(17)),o=n.n(i),u=n(7),j=n(30),l=n(1),b=n(8),p=n(2);function d(t){return Object(b.pipe)(t.trips)}function O(t){return Object(b.pipe)(t.waypoints)}function h(t){return Object(b.pipe)(t.vehicle,p.b)}function f(t){return Object(b.pipe)(t.search_info,(function(t){return 0===t.count}))}function x(t){return Object(b.pipe)(t.next_cursor)}var m=n(14),g=n.n(m),y=n(18);function _(t){return v.apply(this,arguments)}function v(){return(v=Object(y.a)(g.a.mark((function t(e){var n,c,r,s;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"YzbiA8L6DcqxTvSna1lOFQQU66FosDVs",n={lat:48.8566,lng:2.3522},c={lat:45.764043,lng:4.835659},"2021-02-16T06:00:00",r=e?"&from_cursor=".concat(e):"",s="https://public-api.blablacar.com/api/v3/trips?key=".concat("YzbiA8L6DcqxTvSna1lOFQQU66FosDVs","&from_coordinate=").concat(n.lat,"%2C").concat(n.lng,"&from_country=FR&to_coordinate=").concat(c.lat,"%2C").concat(c.lng,"&to_country=GB&locale=fr-FR&currency=EUR&start_date_local=").concat("2021-02-16T06:00:00").concat(r),t.abrupt("return",fetch(s).then((function(t){return t.json()})));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var w=n(5),F=n.n(w),S=n(3);function k(){return Object(S.jsxs)("article",{className:F.a.empty,children:[Object(S.jsx)("div",{className:F.a.loader}),Object(S.jsx)("p",{children:"loading your results..."})]})}function N(t){var e=t.error;return Object(S.jsxs)("article",{className:F.a.empty,children:[Object(S.jsx)("h2",{children:"Oups, something is wrong"}),Object(S.jsx)("p",{children:"Please retry!"}),Object(S.jsx)("p",{children:e.message})]})}function P(){return Object(S.jsxs)("article",{className:F.a.empty,children:[Object(S.jsx)("h2",{children:"Ready to go?"}),Object(S.jsx)("p",{children:"Please select your location and destination"})]})}function T(){return Object(S.jsx)("article",{className:F.a.empty,"data-testid":"no-results",children:Object(S.jsx)("h2",{children:"Sorry, we have not found any trip for with the requested options..."})})}var C=n(15),L=n(12),D=n(19);function E(t){var e=t.trip;return Object(S.jsxs)("article",{children:[Object(S.jsxs)("p",{children:["You'll reach you destination in ",e.duration_in_seconds/60," minutes\xa0",Object(S.jsxs)("span",{children:["(",e.distance_in_meters/1e3,"km)"]})]}),Object(S.jsxs)("p",{children:["It would cost you ",e.price.amount,e.price.currency]}),Object(l.g)(e,h,p.a((function(){return null}),(function(t){return Object(S.jsxs)("p",{children:["You would be riding a sweet ",t.make," ",t.model]})}))),Object(l.g)(e,O,D.a,p.a((function(){return Object(S.jsx)("p",{children:"This is a direct trip"})}),(function(t){return Object(S.jsxs)("p",{children:["This trip has ",t.length," waypoints"]})}))),Object(S.jsx)("a",{href:e.link,target:"_blank",rel:"noreferrer",children:"Interested? Check the details on Blablacar!"})]})}function R(t){var e=Object(c.useState)(t.trips),n=Object(u.a)(e,2),r=n[0],s=n[1],a=Object(c.useState)(!!t.hasNextPage),i=Object(u.a)(a,2),o=i[0],j=i[1],b=Object(c.useState)(t.hasNextPage),p=Object(u.a)(b,2),d=p[0],O=p[1],h=Object(c.useState)(!1),f=Object(u.a)(h,2),x=f[0],m=f[1];return Object(S.jsxs)("div",{children:[Object(S.jsx)("p",{children:"Results"}),Object(S.jsxs)("h1",{children:["Available trips from ",Object(S.jsx)("strong",{children:"Paris"})," to ",Object(S.jsx)("strong",{children:"Lyon"})]}),Object(S.jsx)("ul",{children:Object(l.g)(r,L.b((function(t,e){return Object(S.jsx)("li",{children:Object(S.jsx)(E,{trip:e})},"".concat(e.distance_in_meters,"-").concat(t))})))}),o&&!x&&Object(S.jsx)("button",{type:"button",onClick:function(){m(!0),_(d).then((function(t){j(!!t.next_cursor),O(t.next_cursor),s([].concat(Object(C.a)(r),Object(C.a)(t.trips))),m(!1)}))},children:"Load more"}),x&&Object(S.jsx)("p",{children:"Loading..."})]})}function q(){var t=Object(c.useState)(j.b),e=Object(u.a)(t,2),n=e[0],r=e[1];return Object(c.useEffect)((function(){r(j.c),_().then((function(t){return r(j.d(t))}))}),[r]),Object(S.jsx)(S.Fragment,{children:Object(l.g)(n,j.a((function(){return Object(S.jsx)(P,{})}),(function(){return Object(S.jsx)(k,{})}),(function(t){return Object(S.jsx)(N,{error:t})}),(function(t){return Object(S.jsxs)(S.Fragment,{children:[f(t)&&Object(S.jsx)(T,{}),!f(t)&&Object(S.jsx)(R,{trips:d(t),hasNextPage:x(t)})]})})))})}var A=function(){return Object(S.jsx)("div",{className:o.a.app,children:Object(S.jsx)(q,{})})},B=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,31)).then((function(e){var n=e.getCLS,c=e.getFID,r=e.getFCP,s=e.getLCP,a=e.getTTFB;n(t),c(t),r(t),s(t),a(t)}))};a.a.render(Object(S.jsx)(r.a.StrictMode,{children:Object(S.jsx)(A,{})}),document.getElementById("root")),B()},5:function(t,e,n){t.exports={empty:"EmptyScreen_empty__1K1DJ",loader:"EmptyScreen_loader__bOrnw"}}},[[28,1,2]]]);
//# sourceMappingURL=main.980234f1.chunk.js.map