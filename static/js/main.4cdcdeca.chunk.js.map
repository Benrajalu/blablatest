{"version":3,"sources":["views/Results/TripResult/TripResult.module.scss","views/App.module.scss","views/Results/Loader/Loader.module.scss","domain/search.ts","application/service.ts","views/Results/Loader/Loader.tsx","views/Results/EmtpyScreens/Loading.tsx","views/Results/EmtpyScreens/Error.tsx","views/Results/EmtpyScreens/NotSearching.tsx","views/Results/EmtpyScreens/NoResults.tsx","views/Results/TripResult/TripResult.tsx","views/Results/TripsList/TripsList.tsx","views/Results/ResultsContainer.tsx","views/App.tsx","reportWebVitals.ts","index.tsx","views/Results/EmtpyScreens/EmptyScreen.module.scss","views/Results/TripsList/TripsList.module.scss"],"names":["module","exports","trips","payload","pipe","waypoints","trip","OptionFP","vehicle","hasNoResults","search_info","info","count","hasNextPage","next_cursor","fetchTrips","cursor","a","fromCoordinates","lat","lng","toCoordinates","withCursor","APIRoute","fetch","then","result","json","Loader","className","styles","loader","Loading","empty","title","Error","error","copy","copySmall","message","NotSearching","NoResults","data-testid","TripResult","duration_in_seconds","detail","distance_in_meters","price","amount","currency","Search","make","model","possibleWaypoints","NonEmptyArrayFP","confirmedWaypoints","length","href","link","target","rel","TripsList","props","useState","collectedTrips","setTrips","showLoadMore","setLoadMore","currentCursor","setCursor","isLoading","setIsLoading","wrapper","subtitle","listing","ArrayFP","index","type","onClick","loadMore","ResultsContainer","RemoteData","results","setResults","useEffect","App","app","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"4FACAA,EAAOC,QAAU,CAAC,OAAS,2BAA2B,OAAS,2BAA2B,KAAO,2B,mBCAjGD,EAAOC,QAAU,CAAC,IAAM,mB,mBCAxBD,EAAOC,QAAU,CAAC,OAAS,uBAAuB,KAAO,uB,8JC6ClD,SAASC,EAAMC,GACpB,OAAOC,eACLD,EAAQD,OAIL,SAASG,EAAUC,GACxB,OAAOF,eACLE,EAAKD,UACLE,KAIG,SAASC,EAAQF,GACtB,OAAOF,eACLE,EAAKE,QACLD,KAIG,SAASE,EAAaN,GAC3B,OAAOC,eACLD,EAAQO,aACR,SAACC,GAAD,OAAyB,IAAfA,EAAKC,SAIZ,SAASC,EAAYV,GAC1B,OAAOC,eACLD,EAAQW,a,6BCpEL,SAAeC,EAAtB,kC,4CAAO,WAA0BC,GAA1B,qBAAAC,EAAA,4DACU,mCACTC,EAAyC,CAAEC,IAAK,QAASC,IAAK,QAC9DC,EAAwC,CAAEF,IAAK,UAAWC,IAAK,UAExD,sBACPE,EAAaN,EAAM,uBAAmBA,GAAW,GAEjDO,EARD,4DACU,mCADV,4BAQ2FL,EAAgBC,IAR3G,cAQoHD,EAAgBE,IARpI,0CAQyKC,EAAcF,IARvL,cAQgME,EAAcD,IAR9M,qEAKQ,uBALR,OAQqRE,GARrR,kBAUEE,MAAMD,GACVE,MAAK,SAAAC,GAAM,OAAIA,EAAOC,WAXpB,4C,kDCFQ,SAASC,IACtB,OACI,mBAAGC,UAAWC,IAAOC,OAArB,wB,oBCAS,SAASC,IACtB,OACE,0BAASH,UAAWC,IAAOG,MAA3B,UACE,cAACL,EAAD,IACA,mBAAGC,UAAWC,IAAOI,MAArB,wCCNS,SAASC,EAAT,GAAyC,IAAzBC,EAAwB,EAAxBA,MAC7B,OACE,0BAASP,UAAWC,IAAOG,MAA3B,UACE,oBAAIJ,UAAWC,IAAOI,MAAtB,sCACA,mBAAGL,UAAWC,IAAOO,KAArB,2BACA,mBAAGR,UAAWC,IAAOQ,UAArB,SAAiCF,EAAMG,aCL9B,SAASC,IACtB,OACE,0BAASX,UAAWC,IAAOG,MAA3B,UACE,oBAAIJ,UAAWC,IAAOI,MAAtB,0BACA,mBAAGL,UAAWC,IAAOO,KAArB,4DCJS,SAASI,IACtB,OACE,yBAASZ,UAAWC,IAAOG,MAAOS,cAAY,aAA9C,SACE,oBAAIb,UAAWC,IAAOI,MAAtB,mF,6CCCS,SAASS,EAAT,GAAqD,IAA/BrC,EAA8B,EAA9BA,KACnC,OACE,0BAASuB,UAAWC,IAAOJ,OAA3B,UACE,iEACkC,mCAASpB,EAAKsC,oBAAsB,GAApC,cADlC,OAEI,uBAAMf,UAAWC,IAAOe,OAAxB,cAAkCvC,EAAKwC,mBAAqB,IAA5D,YAGJ,mDAAqB,mCAASxC,EAAKyC,MAAMC,OAAQ1C,EAAKyC,MAAME,eAG1D7C,YACEE,EACA4C,EACA3C,KACE,kBAAM,QACN,SAACC,GAAD,OAAa,6DAA+B,mCAASA,EAAQ2C,KAAjB,IAAwB3C,EAAQ4C,gBAMhFhD,YACEE,EACA4C,EACA3C,KACE,kBAAM,QACN,SAAC8C,GACC,OAAOjD,YACLiD,EACAC,IACA/C,KACE,kBAAM,yDACN,SAACgD,GAAD,OAAwB,+CAAiB,mCAASA,EAAmBC,OAA5B,2BAQrD,mBAAGC,KAAMnD,EAAKoD,KAAMC,OAAO,SAASC,IAAI,aAAa/B,UAAWC,IAAO4B,KAAvE,4D,oBCnCS,SAASG,EAAUC,GAAwB,IAAD,EACpBC,mBAASD,EAAM5D,OADK,mBAChD8D,EADgD,KAChCC,EADgC,OAEnBF,qBAAWD,EAAMjD,aAFE,mBAEhDqD,EAFgD,KAElCC,EAFkC,OAGpBJ,mBAASD,EAAMjD,aAHK,mBAGhDuD,EAHgD,KAGjCC,EAHiC,OAIrBN,oBAAS,GAJY,mBAIhDO,EAJgD,KAIrCC,EAJqC,KAkBvD,OACE,sBAAK1C,UAAWC,IAAO0C,QAAvB,UACE,mBAAG3C,UAAWC,IAAOI,MAArB,qBAEA,qBAAIL,UAAWC,IAAO2C,SAAtB,kCACuB,2CADvB,OACiD,6CAGjD,qBAAI5C,UAAWC,IAAO4C,QAAtB,UAEItE,YACE4D,EACAW,KAAqB,SAAEC,EAActE,GAAhB,OACnB,6BACE,cAACqC,EAAD,CAAYrC,KAAMA,KADpB,UAAYA,EAAKwC,mBAAjB,YAAuC8B,QAM3CV,IAAiBI,GACjB,6BACE,wBACEO,KAAK,SACLC,QAnCZ,WACEP,GAAa,GAEbxD,EAAWqD,GACR3C,MAAK,SAAAC,GACJyC,IAAczC,EAAOZ,aACrBuD,EAAU3C,EAAOZ,aACjBmD,EAAS,GAAD,mBAAKD,GAAL,YAAwBtC,EAAOxB,SACvCqE,GAAa,OA4BP1C,UAAWC,IAAOiD,SAHpB,yBAUHT,GAAa,6BAAI,cAAC1C,EAAD,YCnDX,SAASoD,IAAoB,IAAD,EACXjB,mBAAiEkB,KADtD,mBAClCC,EADkC,KACzBC,EADyB,KAWzC,OARAC,qBAAU,WACRD,EAAWF,KAEXlE,IACGU,MAAK,SAACtB,GAAD,OAAuCgF,EAAWF,IAAmB9E,SAE5E,CAACgF,IAGF,mCAEI/E,YACE8E,EACAD,KACE,kBAAM,cAACzC,EAAD,OACN,kBAAM,cAACR,EAAD,OACN,SAACI,GAAD,OAAW,cAACD,EAAD,CAAOC,MAAOA,OACzB,SAACjC,GAAD,OACE,qCACI+C,EAAoB/C,IAAY,cAACsC,EAAD,KAC/BS,EAAoB/C,IACrB,cAAC0D,EAAD,CACE3D,MAAOgD,EAAa/C,GACpBU,YAAaqC,EAAmB/C,cCzBrCkF,MARf,WACE,OACE,qBAAKxD,UAAWC,IAAOwD,IAAvB,SACE,cAACN,EAAD,OCKSO,EAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,6BAAqBhE,MAAK,YAAkD,IAA/CiE,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCHdO,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,SAM1BZ,K,kBCfAvF,EAAOC,QAAU,CAAC,MAAQ,2BAA2B,OAAS,4BAA4B,KAAO,0BAA0B,MAAQ,2BAA2B,KAAO,4B,kBCArKD,EAAOC,QAAU,CAAC,QAAU,2BAA2B,MAAQ,yBAAyB,SAAW,4BAA4B,QAAU,2BAA2B,SAAW,+B","file":"static/js/main.4cdcdeca.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"result\":\"TripResult_result__1QvSv\",\"detail\":\"TripResult_detail__iu6TC\",\"link\":\"TripResult_link__1aT6c\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__3xquF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Loader_loader__2hqdz\",\"load\":\"Loader_load__3eQlQ\"};","import { pipe } from \"fp-ts/lib/pipeable\";\nimport * as OptionFP from 'fp-ts/Option';\n\ntype Vehicle = {\n  make: string;\n  model: string;\n}\n\ntype Place = {\n  address: string;\n  city: string;\n  country_code: string;\n  latitude: number;\n  longitude: number;\n}\n\ntype Waypoint = {\n  date_time: Date;\n  place: Place;\n}\n\nexport type Trip = {\n  link: string;\n  distance_in_meters: number;\n  duration_in_seconds: number;\n  price: { amount: string, currency: string; };\n  vehicle?: Vehicle;\n  waypoints?: Waypoint[];\n}\n\nexport type Trips = Trip[];\n\nexport type Waypoints = Waypoint[];\n\nexport type TripsQueryPayload = {\n  link: string;\n  search_info: {\n    count: number;\n    full_trip_count: number;\n  };\n  trips: Trips;\n  next_cursor?: string;\n}\n\n// Accessors \n// Enable easy refectoring while keeping the same public interface\nexport function trips(payload: TripsQueryPayload): Trips {\n  return pipe(\n    payload.trips,\n  );\n}\n\nexport function waypoints(trip: Trip): OptionFP.Option<Waypoints> {\n  return pipe(\n    trip.waypoints,\n    OptionFP.fromNullable,\n  );\n}\n\nexport function vehicle(trip: Trip): OptionFP.Option<Vehicle> {\n  return pipe(\n    trip.vehicle,\n    OptionFP.fromNullable,\n  );\n}\n\nexport function hasNoResults(payload: TripsQueryPayload) {\n  return pipe(\n    payload.search_info,\n    (info) => info.count === 0,\n  );\n}\n\nexport function hasNextPage(payload: TripsQueryPayload) {\n  return pipe(\n    payload.next_cursor\n  );\n}","import { TripsQueryPayload } from \"../domain/search\";\n\ntype destinationCoordinates = {\n  lat: number;\n  lng: number;\n}\n\nexport async function fetchTrips(cursor?:string):Promise<TripsQueryPayload> {\n  const apiKey = 'YzbiA8L6DcqxTvSna1lOFQQU66FosDVs';\n  const fromCoordinates:destinationCoordinates = { lat: 48.8566, lng: 2.3522 };\n  const toCoordinates :destinationCoordinates = { lat: 45.764043, lng: 4.835659 };\n  //const date = new Date().toISOString();\n  const date = '2021-02-16T06:00:00';\n  const withCursor = cursor ? `&from_cursor=${cursor}` : '';\n\n  const APIRoute = `https://public-api.blablacar.com/api/v3/trips?key=${apiKey}&from_coordinate=${fromCoordinates.lat}%2C${fromCoordinates.lng}&from_country=FR&to_coordinate=${toCoordinates.lat}%2C${toCoordinates.lng}&to_country=GB&locale=fr-FR&currency=EUR&start_date_local=${date}${withCursor}`\n\n  return fetch(APIRoute)\n    .then(result => result.json())\n}","import React from 'react';\n\nimport styles from './Loader.module.scss';\n\n\nexport default function Loader() {\n  return (\n      <p className={styles.loader}>Loading...</p>\n  )\n}","import React from 'react';\n\nimport Loader from '../Loader/Loader';\n\nimport styles from './EmptyScreen.module.scss';\n\n\nexport default function Loading() {\n  return (\n    <article className={styles.empty}>\n      <Loader />\n      <p className={styles.title}>Loading your results...</p>\n    </article>\n  )\n}","import React from 'react';\n\nimport styles from './EmptyScreen.module.scss';\n\n\nexport default function Error({error}: {error: Error}) {\n  return (\n    <article className={styles.empty}>\n      <h2 className={styles.title}>Oups, something is wrong</h2>\n      <p className={styles.copy}>Please retry!</p>\n      <p className={styles.copySmall}>{error.message}</p>\n    </article>\n  )\n}","import React from 'react';\n\nimport styles from './EmptyScreen.module.scss';\n\n\nexport default function NotSearching() {\n  return (\n    <article className={styles.empty}>\n      <h2 className={styles.title}>Ready to go?</h2>\n      <p className={styles.copy}>Please select your location and destination</p>\n    </article>\n  )\n}","import React from 'react';\n\nimport styles from './EmptyScreen.module.scss';\n\n\nexport default function NoResults() {\n  return (\n    <article className={styles.empty} data-testid=\"no-results\">\n      <h2 className={styles.title}>Sorry, we have not found any trip for with the requested options...</h2>\n    </article>\n  )\n}","import React from 'react';\nimport { pipe } from 'fp-ts/function';\nimport * as NonEmptyArrayFP from 'fp-ts/NonEmptyArray';\nimport * as OptionFP from 'fp-ts/Option';\nimport * as Search from '../../../domain/search';\n\nimport styles from './TripResult.module.scss';\n\n\nexport default function TripResult({ trip }: { trip:Search.Trip }) {\n  return (\n    <article className={styles.result}>\n      <p>\n        You'll reach you destination in <strong>{trip.duration_in_seconds / 60 } minutes</strong>&nbsp;\n          <span className={styles.detail}>({trip.distance_in_meters / 1000}km)</span>\n      </p>\n\n      <p>It would cost you <strong>{trip.price.amount}{trip.price.currency}</strong></p>\n\n      {\n        pipe(\n          trip,\n          Search.vehicle,\n          OptionFP.fold(\n            () => null,\n            (vehicle) => <p>You would be riding a sweet <strong>{vehicle.make} {vehicle.model}</strong></p>,\n          )\n        )\n      }\n\n      {\n        pipe(\n          trip,\n          Search.waypoints,\n          OptionFP.fold(\n            () => null,\n            (possibleWaypoints) => {\n              return pipe(\n                possibleWaypoints,\n                NonEmptyArrayFP.fromArray,\n                OptionFP.fold(\n                  () => <p>This is a direct trip</p>,\n                  (confirmedWaypoints) => <p>This trip has <strong>{confirmedWaypoints.length} waypoints</strong></p>,\n                )\n              )\n            }\n          ) \n        )\n      }\n\n      <a href={trip.link} target=\"_blank\" rel=\"noreferrer\" className={styles.link}>Interested? Check the details on Blablacar!</a>\n    </article>\n  )  \n}","import React, { useState } from 'react';\nimport * as ArrayFP from 'fp-ts/Array';\nimport { pipe } from 'fp-ts/function';\nimport * as Search from '../../../domain/search';\nimport { fetchTrips } from '../../../application/service';\nimport TripResult from '../TripResult/TripResult';\nimport Loader from '../Loader/Loader';\n\nimport styles from './TripsList.module.scss';\n\ntype TripsListTypes = {\n  trips: Search.Trips;\n  hasNextPage?: string;\n}\n\nexport default function TripsList(props: TripsListTypes) {\n  const [collectedTrips, setTrips] = useState(props.trips);\n  const [showLoadMore, setLoadMore] = useState(!!props.hasNextPage);\n  const [currentCursor, setCursor] = useState(props.hasNextPage);\n  const [isLoading, setIsLoading] = useState(false);\n  \n  function handleClick() {\n    setIsLoading(true);\n\n    fetchTrips(currentCursor)\n      .then(result => {\n        setLoadMore(!!result.next_cursor);\n        setCursor(result.next_cursor);\n        setTrips([...collectedTrips, ...result.trips]);\n        setIsLoading(false);\n      })\n  }\n\n  return (\n    <div className={styles.wrapper}>\n      <p className={styles.title}>Results</p>\n      \n      <h1 className={styles.subtitle}>\n        Available trips from <strong>Paris</strong> to <strong>Lyon</strong>\n      </h1>\n\n      <ul className={styles.listing}>\n        {\n          pipe(\n            collectedTrips,\n            ArrayFP.mapWithIndex(( index:number, trip: Search.Trip ) => (\n              <li key={`${trip.distance_in_meters}-${index}`}>\n                <TripResult trip={trip} />\n              </li>\n            ))\n          )\n        }\n         {showLoadMore && !isLoading && (\n          <li>\n            <button \n              type=\"button\" \n              onClick={handleClick}\n              className={styles.loadMore}\n            >\n              Load more\n            </button>\n          </li>\n        )}\n\n        {isLoading && <li><Loader /></li>}\n      </ul>\n    </div>\n  )\n}","import React, { useState, useEffect } from 'react';\nimport * as RemoteData from '@devexperts/remote-data-ts';\nimport { pipe } from 'fp-ts/function';\n\nimport * as Search from '../../domain/search';\nimport { fetchTrips } from '../../application/service';\n\nimport Loading from './EmtpyScreens/Loading';\nimport Error from './EmtpyScreens/Error';\nimport NotSearching from './EmtpyScreens/NotSearching';\nimport NoResults from './EmtpyScreens/NoResults';\nimport TripsList from './TripsList/TripsList';\n\nexport default function ResultsContainer() {\n  const [results, setResults] = useState<RemoteData.RemoteData<Error, Search.TripsQueryPayload>>(RemoteData.initial);\n\n  useEffect(() => {\n    setResults(RemoteData.pending);\n\n    fetchTrips()\n      .then((payload: Search.TripsQueryPayload) => setResults(RemoteData.success(payload)))\n\n  }, [setResults]);\n\n  return (\n    <>\n      {\n        pipe(\n          results,\n          RemoteData.fold(\n            () => <NotSearching />,\n            () => <Loading />,\n            (error) => <Error error={error} />,\n            (payload) => (\n              <>\n                { Search.hasNoResults(payload) && <NoResults /> }\n                { !Search.hasNoResults(payload) && (\n                  <TripsList\n                    trips={Search.trips(payload)}\n                    hasNextPage={Search.hasNextPage(payload)}\n                  />\n                )}\n              </>\n            ),\n          )\n        )\n      }\n    </>\n  )\n}","import React from 'react';\n\nimport styles from './App.module.scss';\n\nimport ResultsContainer from './Results/ResultsContainer';\n\nfunction App() {\n  return (\n    <div className={styles.app}>\n      <ResultsContainer />\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './views/globalStyles/index.scss';\nimport App from './views/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"empty\":\"EmptyScreen_empty__1K1DJ\",\"loader\":\"EmptyScreen_loader__bOrnw\",\"load\":\"EmptyScreen_load__2ozsA\",\"title\":\"EmptyScreen_title__250Yt\",\"copy\":\"EmptyScreen_copy__34gQl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"TripsList_wrapper__uACtM\",\"title\":\"TripsList_title__2WsMk\",\"subtitle\":\"TripsList_subtitle__14x4N\",\"listing\":\"TripsList_listing__1_AiL\",\"loadMore\":\"TripsList_loadMore__1x_Tx\"};"],"sourceRoot":""}